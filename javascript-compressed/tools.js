"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(a){function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(c,a)},_wrapNativeSuper(a)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _construct(){return _construct=isNativeReflectConstruct()?Reflect.construct:function(b,c,d){var e=[null];e.push.apply(e,c);var a=Function.bind.apply(b,e),f=new a;return d&&_setPrototypeOf(f,d.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(b,!0).forEach(function(c){_defineProperty2(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty2(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var defineProperties=function(a,b){Object.defineProperties(a,Object.keys(b).reduce(function reducer(a,c){return _objectSpread({},a,_defineProperty2({},c,_objectSpread({},Object.getOwnPropertyDescriptor(b,c),{enumerable:!1})))},{}))};defineProperties(Array.prototype,{get last(){return this[Math.max(0,this.length-1)]},set last(a){this[Math.max(0,this.length-1)]=a},crumble:function crumble(){var a={0:null,1:this[0],default:this};return 1<this.length?a["default"]:a[this.length]},crumbleFlat:function crumbleFlat(a){return this.flat(a).crumble()},reduceSkip:function reduceSkip(a,b){for(var c,d,e=!1,f=Symbol.skip,g=[],h=0;h<this.length;h++){if(d=this[h],!e)if(e=!0,1<arguments.length)c=Object.clone(b);else{c=d;continue}var i=a(c,d,f,h,this);i==f?(g.push(c),e=!1,h--):c=i}return e&&g.push(c),g},softReverse:function softReverse(){for(var a,b=[],c=0,d=Array.from(this.entries());c<d.length;c++)a=d[c],b[-1*a[0]+this.length-1]=a[1];return b}}),defineProperties(Object,{clone:function clone(a){if("object"!=_typeof(a))return a;var b=a.constructor;return Object.assign(new b,a)},every:function every(b,c,d){return this.entries(b).every(function(e,a){return c.call(d,e,a,b)})},filter:function filter(b,c,d){return this.fromEntries(this.entries(b).filter(function(e,a){return c.call(d,e,a,b)}))},getType:function getType(a){return Object.getPrototypeOf(a).constructor.name},objectHasOwnProperty:function objectHasOwnProperty(a,b){return[].hasOwnProperty.call(a,b)},objectHasProperty:function objectHasProperty(a,b){for(var c=this,d=[a];null!==this.getPrototypeOf(d.last);)d.push(this.getPrototypeOf(d.last));return d.some(function(a){return c.objectHasOwnProperty(a,b)})}}),defineProperties(String.prototype,{capitalize:function capitalize(){return this.substr(0,1).toUpperCase()+this.substr(1)},escape:function escape(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],b=this.split("");return a&&(b=b.map(function(a){return["\"","'","\\"].includes(a)?"\\"+a:a})),b=b.map(function(a){return["\n","\r","\t"].includes(a)?"\\"+{"\n":"n","\r":"r","	":"t"}[a]:a}),b.join("")},toTitleCase:function toTitleCase(){return this.split(" ").map(function(a){return a.toLowerCase().capitalize()}).join(" ")},interpolate:function interpolate(values){for(var match,bldr=this.split(""),vars="let [".concat(Object.keys(values),"] = [").concat(Object.keys(values).map(function(a){return"values."+a}),"]");-1!=(match=bldr.indexOf("$",++match));)if("\\"!=bldr[match++-1]&&"{"==bldr[match++]){for(var bracks=1,end=match;0<("}"==bldr[end]?bracks--:"{"==bldr[end]?bracks++:bracks);)end++;end--;var code=bldr.slice(match--,end).join("");bldr.splice(--match,end- --match,"".concat(eval("".concat(vars,"; (").concat(code.escape(!1),")"))))}return bldr.join("")}}),defineProperties(Symbol,{skip:Symbol("skip")});function bound(a,b,c){a.constructor==Object&&(c=a);var d=c.value;return delete c.writable,delete c.value,c.get=function(){return d.bind(this)},c}function withSelf(a,b,c){var d=c.value;return delete c.writable,delete c.value,c.get=function(){var a=this;return function(){for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];return d.call.apply(d,[a,this].concat(c))}},c}var AdvancedError=function(a){function b(a,c){var d;if(_classCallCheck(this,b),a instanceof Error){var e=[void 0,a];a=e[0],c=e[1]}d=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this)),_defineProperty(_assertThisInitialized(d),"stack",void 0),_defineProperty(_assertThisInitialized(d),"message",void 0),_defineProperty(_assertThisInitialized(d),"displayedStack",void 0),_defineProperty(_assertThisInitialized(d),"description",void 0),_defineProperty(_assertThisInitialized(d),"stackMap",void 0),_defineProperty(_assertThisInitialized(d),"suppressed",void 0),_defineProperty(_assertThisInitialized(d),"suppressedStackMap",void 0),d.description=a,d.name=d.constructor.name,d.stackMap=b.parseStack(d.stack),c&&(d.suppressed=c,!(c instanceof b)&&(d.suppressedStackMap=b.parseStack(c.stack)));var f=function(a){return{get:function get(){return console.log(new Error().stack),1<b.parseStack(new Error().stack).length?a:(console.debug("Error thrown: ",this),this.displayedStack)}}};return Object.defineProperties(_assertThisInitialized(d),{stack:f(d.stackMap),message:f(d.description)}),d.displayedStack=b.stringifyStack(_assertThisInitialized(d)),d}return _inherits(b,a),_createClass(b,null,[{key:"extend",value:function extend(a){a=a.capitalize();var b=_defineProperty2({},a,function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,_getPrototypeOf(b).apply(this,arguments))}return _inherits(b,a),b}(this)),c=b[a];return c}},{key:"stringifyStack",value:function stringifyStack(a){if(!(a instanceof b))return a.stack;for(var e=[a];a instanceof b&&a.suppressed;)e.push(a=a.suppressed);var c,d="";return errors.forEach(function(a,e){var f=a instanceof b?a.stackMap:errors[e-1].suppressedStackMap,g=Object.clone(f);if(c){var h=c.softReverse(),i=g.softReverse().find(function(a,b){var c=h[b];return!c||a.methodName!=c.methodName||a.file!=c.file});g.splice(g.indexOf(i)+2)}d+=(0==e?"":"\nCaused by: ")+a.name,a.message&&(d+=": "+a.message),g.forEach(function(a){d+="\n\tat "+a.methodName+" ("+a.file+":"+a.lineNumber+":"+a.column+")"}),g.length<f.length&&(d+="\n\t... "+(f.length-g.length)+" more"),c=f}),d}},{key:"parseStack",value:function parseStack(a){var c=a.split("\n");return c.reduce(function(a,c){var d=b.parseChrome(c)||b.parseWinjs(c)||b.parseGecko(c)||b.parseNode(c)||b.parseJSC(c);return d&&a.push(d),a},[])}},{key:"parseChrome",value:function parseChrome(a){var c=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,d=/\((\S*)(?::(\d+))(?::(\d+))\)/,e=c.exec(a);if(!e)return null;var f=e[2]&&0===e[2].indexOf("native"),g=e[2]&&0===e[2].indexOf("eval"),h=d.exec(e[2]);return g&&null!=h&&(e[2]=h[1],e[3]=h[2],e[4]=h[3]),{file:f?null:e[2],methodName:e[1]||b.UNKNOWN_FUNCTION,arguments:f?[e[2]]:[],lineNumber:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}},{key:"parseWinjs",value:function parseWinjs(a){var c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,d=c.exec(a);return d?{file:d[2],methodName:d[1]||b.UNKNOWN_FUNCTION,arguments:[],lineNumber:+d[3],column:d[4]?+d[4]:null}:null}},{key:"parseGecko",value:function parseGecko(a){var c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,e=c.exec(a);if(!e)return null;var f=e[3]&&-1<e[3].indexOf(" > eval"),g=d.exec(e[3]);return f&&null!=g&&(e[3]=g[1],e[4]=g[2],e[5]=null),{file:e[3],methodName:e[1]||b.UNKNOWN_FUNCTION,arguments:e[2]?e[2].split(","):[],lineNumber:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}},{key:"parseJSC",value:function parseJSC(a){var c=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i,d=c.exec(a);return d?{file:d[3],methodName:d[1]||b.UNKNOWN_FUNCTION,arguments:[],lineNumber:+d[4],column:d[5]?+d[5]:null}:null}},{key:"parseNode",value:function parseNode(a){var c=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i,d=c.exec(a);return d?{file:d[2],methodName:d[1]||b.UNKNOWN_FUNCTION,arguments:[],lineNumber:+d[3],column:d[4]?+d[4]:null}:null}}]),_createClass(b,[{key:"toString",value:function toString(){return this.displayedStack}}]),b}(_wrapNativeSuper(Error));_defineProperty(AdvancedError,"UNKNOWN_FUNCTION","<unknown>");var ArbitraryDataError=function(a){function b(a,c,d){var e;return _classCallCheck(this,b),e=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,c,d)),_defineProperty(_assertThisInitialized(e),"data",void 0),e.data=a,e}return _inherits(b,a),_createClass(b,[{key:"getData",value:function getData(){return this.data}}]),b}(AdvancedError),AdvancedTypeError=AdvancedError.extend("AdvancedTypeError"),NullError=AdvancedTypeError.extend("NullError"),ArgumentsError=AdvancedError.extend("ArgumentsError");